\chapter{Concepts}\label{con}
The goal of this project is to generate large quantity of realistic SEM images enough to train a neural network. Genereated images should include landmark features common among all SEM images, such as edge bloom, and defects resulting from microscope characteristics (out of focus etc). To achieve this, it is necessary to simulate the trajectory of an electron in a computational efficient manner. This section contains the background and algorithm for tracking each electron throughout its `lifetime' that is relevant for the purpose of the simulation. The algorithm is being developed jointly by John S. Villarrubia and Nicholas W. M. Ritchie of NIST. 

%\section{Simulation}\label{con:monte_carlo_ss}
%\begin{figure}[h]
%\begin{center}
%\includegraphics[width=0.7\textwidth]{img/Propagation_Concept.pdf}
%\caption{\label{fig:Propagation_Concept}An one-scatterer propagation environment}
%\end{center}
%\end{figure}

\section{Material}\label{con:material}
Various physical scattering models require different material properties. Material is defined by its elemental composition and density. The exact composition of the material is used to obtain 
\begin{enumerate}
\item MeanIonizationPotential in JoyLuoNieminenCSD
\item RandomizedScatterFactory (NISTMottRS Factory for example) in SelectableElasticSM etc.
\end{enumerate}

\subsection{SE Material}\label{subsec:sematerial}
SEmaterial, or Secondary Electron generating material, is an extension of material that provide more material properties for scattering models that supports secondary electron generation. The models can then decide which properties to use and how to use them. Additional properties made available by this extension include the material work function, plasmon energy, the location of the conduction band minimum, and electronic structure of the material in the form of a representation of the density of states. 

For some models, scattering cross sections depend upon the target electron's kinetic energy and not simply upon its total energy. To facilitate these models, kinetic energies are associated with each of the states. These energies may be supplied by the user (e.g., based upon literature values or the user's own model for the material). If they are not supplied by the user, default values are supplied. For electrons in the conduction band (energy above the conduction band minimum) the default algorithm assigns a kinetic energy equal to the distance of the state above the band minimum. For electrons at lower levels the default algorithm assigns a kinetic energy equal to the distance of the state below the vacuum level. The user should override the default values if more accurate informations are available. 

\section{Material Scatter Model}\label{con:msm}
A material scatter model consists of three parts:
\begin{enumerate}
\item A list of scattering mechanisms (e.g., Mott elastic scattering, Moller SE production, Plasmon SE production,...) that operate in the material. These scattering mechanisms may discontinuously (i.e., at a scattering event) change the primary electron energy and direction and they may create secondary electrons. 
\item A single barrier scattering function. This method models scattering at a material interface. 
\item A single continuous slowing down function. Determines the energy loss of the primary electron within the material. 
\end{enumerate}
Each material in the sample must be associated with a material scattering model. It combines the various mechanisms to determine overall scattering behavior, including free path, secondary generation, etc. 

\section{Scatter Mechanism}\label{con:sm}
A scatter mechanism governs the interaction of a electron with the environment. Each material scatter model can be associated with multiple scatter mechanisms, each with its own scatter effects and probability of occuring (eg. scattering rate). Its effects are a function of the medium/material and the electron's current energy. Effects can include changing the (primary) electron's direction and energy, and even generating a secondary electron with its own energy and direction through some inelastic scattering events. 

\section{Barrier Scatter Mechanism}
Barrier scattering occurs when an electron encounters a boundary between two materials and deflects. Differences in the potential energy (work function, etc.) in the two materials may cause a change in the electron's energy or trajectory. Note that it is possible for the barrier scatter mechanism to produce a secondary electron. 

The only barrier scatter mechanisms included in JMONSEL is the default \emph{Exponential Quantum Mechanical Barrier Scatter Mechanism}. 

\subsection{Exponential Quantum Mechanical Barrier Scatter Mechanism}
\begin{align*}
   U(x) &= \frac{\Delta U}{1+e^{-2x/\lambda}} \numberthis \label{eq:expqmsm}
\end{align*}
Quantum mechanical scattering from a finite--width barrier with ``exponential'' shape, meaning the form of the potential energy barrier is assumed to be \eqref{eq:expqmsm}. This barrier function represents a smooth `s--shaped' transition from $U(x)=0$ well to the left of the barrier to $U(x)=\Delta U$ well to the right. $\lambda$ is a measure of the width of the barrier. Roughly half (~46\%) of the transition occurs over a distance equal to $\lambda$ (from $x = -\lambda/2$ to $x = \lambda/2$), $90\%$ over $3\lambda$. 

In the limit that lambda is ``large'', this probability approaches the classical result. In the limit that lambda goes to $0$, it approaches the transmission probability for sharp barriers encountered in elementary quantum mechanics texts. For most purposes the useful range of $\lambda$ values is from $0 m$ to $1E-9 m$. Anything larger than this is essentially classical. 

This is therefore a general implementation of barrier scattering that includes classical and sharp--barrier quantum mechanical scattering as special cases. Two constructors are provided. Both constructors accept a material as input (from which the barrier height is determined). One constructor additionally allows specification of $\lambda$. The other does not. The constructor without $\lambda$ specification implements classical barrier scattering (the large lambda limit). This method of implementing classical barrier scattering is preferred to giving an explict but large value of $\lambda$ because it uses a simpler limiting--case formula, and it avoids possible numerical issues associated with large arguments. The constructor with an explicit $\lambda$ specification implements quantum mechanical scattering for a barrier of the specified width. Equation \ref{eq:expqmsm} is an instance of the sigmoid function. 

\section{Slowing Down Algorithm}\label{con:sda}
Slowing down algorithms compute energy loss of the electron as a function of initial energy and distance moved. The loss depends on properties of the medium through which the electron travels. 
 
\subsection{Joy--Luo--Nieminen SDA}
Implements a continuous energy loss formula modified for low energies. Above a cutoff energy it uses the Bethe energy loss as modified by Joy and Luo. The Joy/Luo modification improves the accuracy at low energies. Below the cutoff energy it approximates the energy loss as proportional to the electron's energy to the 5/2 power, as described by \cite{Nieminen}. The dividing line between these two approximations is a parameter that must be supplied to the constructor when this slowing down algorithm is instantiated. The proportionality constant in Nieminen's low energy form is then chosen to enforce equality of the two forms at the cutoff energy. 

This scattering mechanism uses the following material properties, which therefore need to be properly defined: workfunction (unless supplied in the constructor), the elemental composition, density, and weight fractions. 
